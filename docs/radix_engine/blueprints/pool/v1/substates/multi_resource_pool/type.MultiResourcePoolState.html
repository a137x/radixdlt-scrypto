<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `MultiResourcePoolState` type in crate `radix_engine`."><title>MultiResourcePoolState in radix_engine::blueprints::pool::v1::substates::multi_resource_pool - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../../../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../../../../../../" data-static-root-path="../../../../../../static.files/" data-current-crate="radix_engine" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.1 (7cf61ebde 2024-03-27)" data-channel="1.77.1" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../../../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../../../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../../../../../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc type"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../../radix_engine/index.html">radix_engine</a><span class="version">1.1.2</span></h2></div><h2 class="location"><a href="#">MultiResourcePoolState</a></h2><div class="sidebar-elems"><section><h3><a href="#aliased-type">Aliased type</a></h3><h3><a href="#fields">Fields</a></h3><ul class="block field"><li><a href="#structfield.pool_unit_resource_manager">pool_unit_resource_manager</a></li><li><a href="#structfield.vaults">vaults</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-FieldContentSource%3CMultiResourcePoolStateFieldPayload%3E-for-Substate">FieldContentSource&lt;MultiResourcePoolStateFieldPayload&gt;</a></li></ul></section><h2><a href="index.html">In radix_engine::blueprints::pool::v1::substates::multi_resource_pool</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../../../../radix_engine/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Type Alias <a href="../../../../../index.html">radix_engine</a>::<wbr><a href="../../../../index.html">blueprints</a>::<wbr><a href="../../../index.html">pool</a>::<wbr><a href="../../index.html">v1</a>::<wbr><a href="../index.html">substates</a>::<wbr><a href="index.html">multi_resource_pool</a>::<wbr><a class="type" href="#">MultiResourcePoolState</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../../../../src/radix_engine/blueprints/pool/v1/substates.rs.html#87-103">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub type MultiResourcePoolState = <a class="type" href="type.MultiResourcePoolStateV1.html" title="type radix_engine::blueprints::pool::v1::substates::multi_resource_pool::MultiResourcePoolStateV1">MultiResourcePoolStateV1</a>;</code></pre><h2 id="aliased-type" class="section-header">Aliased Type<a href="#aliased-type" class="anchor">§</a></h2><pre class="rust item-decl"><code>struct MultiResourcePoolState {
    pub vaults: <a class="struct" href="../../../../../types/radix_engine_common/prelude/indexmap/struct.IndexMap.html" title="struct radix_engine::types::radix_engine_common::prelude::indexmap::IndexMap">IndexMap</a>&lt;<a class="struct" href="../../../../../types/struct.ResourceAddress.html" title="struct radix_engine::types::ResourceAddress">ResourceAddress</a>, <a class="struct" href="../../../../../types/struct.Vault.html" title="struct radix_engine::types::Vault">Vault</a>&gt;,
    pub pool_unit_resource_manager: ResourceManager,
}</code></pre><h2 id="fields" class="fields section-header">Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.vaults" class="structfield section-header"><a href="#structfield.vaults" class="anchor field">§</a><code>vaults: <a class="struct" href="../../../../../types/radix_engine_common/prelude/indexmap/struct.IndexMap.html" title="struct radix_engine::types::radix_engine_common::prelude::indexmap::IndexMap">IndexMap</a>&lt;<a class="struct" href="../../../../../types/struct.ResourceAddress.html" title="struct radix_engine::types::ResourceAddress">ResourceAddress</a>, <a class="struct" href="../../../../../types/struct.Vault.html" title="struct radix_engine::types::Vault">Vault</a>&gt;</code></span><div class="docblock"><p>The vaults being stored as a <code>IndexMap</code> and not as a <code>KeyValueStore</code> is intentional here!</p>
<p>All of the operations on the many pool blueprint require loading all of the vaults and doing
some arithmetic, reading their state (with exception to protected deposit and withdraw).
Storing this as a <code>KeyValueStore</code> only to later read the entire KVStore is pointless.</p>
<p>Also, while protected deposits and withdraws <em>technically</em> do not need to read the entire
map of vaults they realistically do since the caller needs to know the balances to do the
arithmetic they need prior to doing a deposit or withdraw. Thus, these two methods are in
a realistic setting need to read that state.</p>
<p>Additionally, size should not be a serious concern for any realistic application. The vaults
map in a pool of 10 resources is just 605 bytes with 20 resources its 1205 bytes which is
still reasonable. Note that most applications that would use a pool of this kind might be
balancer-esc applications where the maximum number of tokens a pool can hold is 8; thus
there is no concern that this map would become too big.</p>
<p>Finally, when using this resource pool as part of a dApp all that the dApp would store is a
reference to the pool. In other words, if the dApp has a method that does not interact with
the pool, it is not in any way affected by how the pool stores the vaults; cost units and
fees do not come into the picture there.</p>
</div><span id="structfield.pool_unit_resource_manager" class="structfield section-header"><a href="#structfield.pool_unit_resource_manager" class="anchor field">§</a><code>pool_unit_resource_manager: ResourceManager</code></span><div class="docblock"><p>The resource manager of the pool unit resource that the pool works with.</p>
</div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-FieldContentSource%3CMultiResourcePoolStateFieldPayload%3E-for-Substate" class="impl"><a class="src rightside" href="../../../../../../src/radix_engine/blueprints/pool/v1/substates.rs.html#87-103">source</a><a href="#impl-FieldContentSource%3CMultiResourcePoolStateFieldPayload%3E-for-Substate" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="../../../../models/payloads/trait.FieldContentSource.html" title="trait radix_engine::blueprints::models::payloads::FieldContentSource">FieldContentSource</a>&lt;<a class="struct" href="multi_resource_pool_models/struct.MultiResourcePoolStateFieldPayload.html" title="struct radix_engine::blueprints::pool::v1::substates::multi_resource_pool::multi_resource_pool_models::MultiResourcePoolStateFieldPayload">MultiResourcePoolStateFieldPayload</a>&gt; for <a class="type" href="multi_resource_pool_models/type.MultiResourcePoolState.html" title="type radix_engine::blueprints::pool::v1::substates::multi_resource_pool::multi_resource_pool_models::MultiResourcePoolState">MultiResourcePoolState</a></h3></section></summary><div class="impl-items"><section id="method.into_content" class="method trait-impl"><a class="src rightside" href="../../../../../../src/radix_engine/blueprints/pool/v1/substates.rs.html#87-103">source</a><a href="#method.into_content" class="anchor">§</a><h4 class="code-header">fn <a href="../../../../models/payloads/trait.FieldContentSource.html#tymethod.into_content" class="fn">into_content</a>(self) -&gt; <a class="enum" href="multi_resource_pool_models/enum.VersionedMultiResourcePoolState.html" title="enum radix_engine::blueprints::pool::v1::substates::multi_resource_pool::multi_resource_pool_models::VersionedMultiResourcePoolState">VersionedMultiResourcePoolState</a></h4></section><section id="method.into_payload" class="method trait-impl"><a class="src rightside" href="../../../../../../src/radix_engine/blueprints/models/payloads.rs.html#114-116">source</a><a href="#method.into_payload" class="anchor">§</a><h4 class="code-header">fn <a href="../../../../models/payloads/trait.FieldContentSource.html#method.into_payload" class="fn">into_payload</a>(self) -&gt; Payload</h4></section><section id="method.into_locked_substate" class="method trait-impl"><a class="src rightside" href="../../../../../../src/radix_engine/blueprints/models/payloads.rs.html#118-120">source</a><a href="#method.into_locked_substate" class="anchor">§</a><h4 class="code-header">fn <a href="../../../../models/payloads/trait.FieldContentSource.html#method.into_locked_substate" class="fn">into_locked_substate</a>(self) -&gt; <a class="enum" href="../../../../../system/system_substates/enum.FieldSubstate.html" title="enum radix_engine::system::system_substates::FieldSubstate">FieldSubstate</a>&lt;Payload&gt;</h4></section><section id="method.into_unlocked_substate" class="method trait-impl"><a class="src rightside" href="../../../../../../src/radix_engine/blueprints/models/payloads.rs.html#122-124">source</a><a href="#method.into_unlocked_substate" class="anchor">§</a><h4 class="code-header">fn <a href="../../../../models/payloads/trait.FieldContentSource.html#method.into_unlocked_substate" class="fn">into_unlocked_substate</a>(self) -&gt; <a class="enum" href="../../../../../system/system_substates/enum.FieldSubstate.html" title="enum radix_engine::system::system_substates::FieldSubstate">FieldSubstate</a>&lt;Payload&gt;</h4></section></div></details></div></section></div></main></body></html>